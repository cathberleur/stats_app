---
title: "Cartes"
author: "Meyer, Berleur, Sklenard, Bracq"
date: "07/02/2023"
output: html_document
---
header-includes:
- \usepackage{fancyhdr}
- \pagestyle{fancy}
- \fancyhead{}
- \fancyfoot{}
- \fancyhead[CO,CE]{Poing Levé}
- \fancyfoot[CO,CE]{Sondage}
- \fancyfoot[R]{\thepage}
output:
  pdf_document:
    toc: yes
    toc_depth : 3
    latex_engine: xelatex
  html_document:
    toc: yes
editor_options: 
  markdown: 
    wrap: sentence
---

```{=html}
<style>
body {
text-align: justify}
</style>
```

On va essayer de faire une carte avec la base créée pour l'ACM.


```{r}
# install.packages('sf')
# install.packages('ggplot2')
#install.packages('ggplot')
library(sf)
library(ggplot2)
library(geometry)
#library(ggplot)
sf_use_s2(FALSE) #turns off spherical geometry

```


```{r}

df_facto_carto <- merge(x = contours, y = df_facto_zon, by.y = 'CODGEO', by.x = 'insee')
contours_cropped <- st_crop(contours, xmin = -20, xmax = 40, ymin = 30, ymax = 55)
#ggplot() + geom_sf(data = contours_cropped) + theme_bw() + coord_sf(expand = FALSE)

ggplot() + geom_sf(data = contours) +
  coord_sf(xlim = c(-7, 10)
           , ylim = c(40, 52), expand = FALSE) +
  theme_bw() # juste les contours

ggplot() + geom_sf(data = df_facto_carto) +
  coord_sf(xlim = c(-7, 10), ylim = c(40, 52), expand = FALSE) +
  theme_bw()# contours joints à nos données, pourquoi il manque des régions ?



# df_facto_carto <- merge(x = df_facto_zon, y = fr_cont_cropped, by.x = 'CODGEO', by.y = 'insee')
```
pour les drom com il faudrait (?) changer les coordonnées (couper ailleurs)

```{r}
as.numeric(unlist(df_facto_carto))
plot(df_facto_carto)
```


```{r}
plot(df_facto_carto$geometry)
ggplot(df_facto_carto) + geom_sf()
```
